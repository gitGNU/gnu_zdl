<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>zdl</title>
    <script>var start_path="__START_PATH__"</script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
  </head>
  
  <body onload="loadJSON('/tmp/zdl.d/data.json');">
    <h2>ZDL</h2>
    <form action="" method="post">
      Nuovo link:
      <input type="hidden" name="cmd" value="add-link">
      <input type="hidden" name="path" value="__START_PATH__">
      <input type="text" name="link">
      <input type="submit" name="submit" value="Invia">
    </form>

    <img src="/Hexadecimal-counting.jpg">
    <button onclick="loadJSON('/tmp/zdl.d/data.json');">aggiorna JSON</button>
    <div id="out" style="margin-bottom:20px"></div>
    <script>
    // function reloadJSON (url) {
    // 	$.getJSON(url,
    // 		  function(json) {
    // 		      $( "#out" ).text(JSON.stringify(json, null, 2));
    // 		  })
    // }
    
    function loadJSON (url) {
    	var req = new XMLHttpRequest();
    	req.open('GET', url, true);
    	req.onload = function() {
    	    if (req.status == 200) {
    		var data = JSON.parse(req.responseText);
		var output = ""
		for (var i=0; i<data.length; i++) {
		    for (var j in data[i]) {
    			output += j + ": " + data[i][j] + "<br>";
		    }
		}
		document.getElementById('out').innerHTML = output;
    	    } else {
    		alert("Error " + req.status);
    	    }
    	};
    	req.send();
    }

    </script>
</body>

</html>
